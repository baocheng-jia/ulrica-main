## 什么是注册中心
### 注册中心的定义：
注册中心主要是用来解决微服务架构下多个服务相互远程调用的问题。在一个完整的注册中心里面，注册中心主要提供三种角色：服务提供者【service provider】、服务消费者【service consumer】、服务注册中心【service registry】。

- 服务提供者：在启动的时候向服务注册中心注册自身服务，并定时的向服务注册中心发送心跳汇报服务的状态。
- 服务消费者：在启动的时候，向服务注册中心订阅服务，把服务注册中心的节点数据列表缓存到本地内存中间
- 服务注册中心：用于保存server的注册信息，当server的注册信息发生变更的时候，注册中心会同步注册列表的变更，consumer感知到会重新拉取对应的注册信息，缓存到本地。
![](../../../../../../../Downloads/未命名文件.png)

### 完整的注册中心需要的功能

- 提供注册中心的API：

  - 服务注册接口：
  - 服务注销接口：
  - 心跳检测接口：
  - 服务查询接口：
  - 服务变更查询：
  
- 服务的高可用：
- 数据存储的格式和位置：
- 服务健康检测策略：
- 服务变更通知机制：
- 白名单机制 -- 环境隔离：

### 什么是CAP？
CAP理论是分布式架构里面非常重要的一个理论：

- C【Consistency】:C的含义是一致性，要求是所有的节点在统一时间节点具有相同的数据。
- A【Availability】：A的含义是可用性，要求是每个请求不管成功或者失败都要有具体的响应
- P【Partition Tolerance】:P的含义是分区容错，系统中任意信息的丢失或者失败都不会影响整个系统的运行。个人的理解就是节点的宕机不影响整个系统的正常运行

### 常见的分布式系统协议

- Paxos一致性协议算法：

  - Paxos算法是Leslie lamport在1990年提出来的一种`基于消息传递的一致性算法`，非常难以理解，基于Paxos协议的数据同步在于传统主备方式最大的区别在于：Paxos只需要超过半数的副本在线且相互通信正常，就可以保证服务的持续可用，并且数据不会丢失。
- Raft一致性协议算法：

  - Raft算法是斯坦福大学的Diego Ongaro、John Ousterhout两个人以易理解为目标设计的一致性算法。
- ZAB一致性协议算法：

  - ZAB的全称是 Zookeeper Atomic Broadcast. 是Zookeeper实现分布式数据一致性的核心算法，ZAB借鉴了Paxos算法，但又像Paxos算法那样，是一种通用的分布式一致性算法，他是一种特别为Zookeeper专门设计的支持崩溃恢复的原子广播协议

### 常见的一些开源的注册中心
#### Zookeeper
#### Eureka
#### Nacos
#### Consul
#### ETCD
